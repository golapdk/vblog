(function(a, b) {
    if (typeof define === "function" && define.amd) {
        define(b)
    } else {
        if (typeof exports === "object") {
            module.exports = b(require, exports, module)
        } else {
            a.ouibounce = b()
        }
    }
}(this, function(b, a, c) {
    return function d(g, l) {
        var B = l || {}
          , n = B.aggressive || false
          , D = w(B.sensitivity, 20)
          , r = w(B.timer, 1000)
          , A = w(B.delay, 0)
          , m = B.callback || function() {}
          , p = s(B.cookieExpire) || ""
          , u = B.cookieDomain ? ";domain=" + B.cookieDomain : ""
          , v = B.cookieName ? B.cookieName : "viewedOuibounceModal"
          , x = B.sitewide === true ? ";path=/" : ""
          , i = null
          , f = document.documentElement;
        function w(F, E) {
            return typeof F === "undefined" ? E : F
        }
        function s(G) {
            var F = G * 24 * 60 * 60 * 1000;
            var E = new Date();
            E.setTime(E.getTime() + F);
            return "; expires=" + E.toUTCString()
        }
        setTimeout(j, r);
        function j() {
            if (t()) {
                return
            }
            f.addEventListener("mouseleave", C);
            f.addEventListener("mouseenter", q);
            f.addEventListener("keydown", k)
        }
        function C(E) {
            if (E.clientY > D) {
                return
            }
            i = setTimeout(y, A)
        }
        function q() {
            if (i) {
                clearTimeout(i);
                i = null
            }
        }
        var o = false;
        function k(E) {
            if (o) {
                return
            } else {
                if (!E.metaKey || E.keyCode !== 76) {
                    return
                }
            }
            o = true;
            i = setTimeout(y, A)
        }
        function z(F, E) {
            return e()[F] === E
        }
        function e() {
            var H = document.cookie.split("; ");
            var E = {};
            for (var F = H.length - 1; F >= 0; F--) {
                var G = H[F].split("=");
                E[G[0]] = G[1]
            }
            return E
        }
        function t() {
            return z(v, "true") && !n
        }
        function y() {
            if (t()) {
                return
            }
            if (g) {
                g.style.display = "block"
            }
            m();
            h()
        }
        function h(E) {
            var F = E || {};
            if (typeof F.cookieExpire !== "undefined") {
                p = s(F.cookieExpire)
            }
            if (F.sitewide === true) {
                x = ";path=/"
            }
            if (typeof F.cookieDomain !== "undefined") {
                u = ";domain=" + F.cookieDomain
            }
            if (typeof F.cookieName !== "undefined") {
                v = F.cookieName
            }
            document.cookie = v + "=true" + p + u + x;
            f.removeEventListener("mouseleave", C);
            f.removeEventListener("mouseenter", q);
            f.removeEventListener("keydown", k)
        }
        return {
            fire: y,
            disable: h,
            isDisabled: t
        }
    }
}));
